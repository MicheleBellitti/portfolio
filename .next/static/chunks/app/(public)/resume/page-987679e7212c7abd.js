(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{1098:(e,a,t)=>{Promise.resolve().then(t.bind(t,6071))},1788:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2643:(e,a,t)=>{"use strict";t.d(a,{U:()=>s});var l=t(67);function s(){return(0,l.createBrowserClient)("https://yyuyikhmqzlzchndamiw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5dXlpa2htcXpsemNobmRhbWl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MDU0NjIsImV4cCI6MjA2NTM4MTQ2Mn0.zNEzk_r7LegdNzb1zUV0h696Q1BWrHWC9vuC_H9ZuU4")}},6071:(e,a,t)=>{"use strict";t.d(a,{default:()=>g});var l=t(5155),s=t(2115),r=t(6408),i=t(9946);let o=(0,i.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var n=t(1788);let c=(0,i.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),d=(0,i.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var u=t(7051),m=t(6681),p=t(2643);let h={supabase:{url:"https://yyuyikhmqzlzchndamiw.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5dXlpa2htcXpsemNobmRhbWl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MDU0NjIsImV4cCI6MjA2NTM4MTQ2Mn0.zNEzk_r7LegdNzb1zUV0h696Q1BWrHWC9vuC_H9ZuU4"}},y=()=>!!(h.supabase.url&&h.supabase.anonKey&&"https://placeholder.supabase.co"!==h.supabase.url);var f=t(3568);function g(){let[e,a]=(0,s.useState)(null),[t,i]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[x,b]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),{user:N}=(0,m.A)(),k=y();(0,s.useEffect)(()=>{k?I():j()},[k]);let j=()=>{try{let e=localStorage.getItem("local-resume-data"),t=localStorage.getItem("local-resume-name");if(e&&t){let l=atob(e),s=Array(l.length);for(let e=0;e<l.length;e++)s[e]=l.charCodeAt(e);let r=new Uint8Array(s),i=new Blob([r],{type:"application/pdf"}),o=URL.createObjectURL(i);a(o),g(new File([i],t,{type:"application/pdf"})),w(!0)}}catch(e){console.log("Error loading local resume:",e)}finally{i(!1)}},I=async()=>{try{let e=(0,p.U)(),{data:t,error:l}=await e.from("resumes").select("*").eq("is_active",!0).single();l?(console.log("Resume fetch error, trying local fallback:",l),j()):t&&(a(t.file_url),w(!1),i(!1))}catch(e){console.log("Error fetching resume, falling back to local:",e),j()}},A=async t=>{var l;let s=null==(l=t.target.files)?void 0:l[0];if(!s)return;if(!s.type.includes("pdf"))return void f.Ay.error("Please upload a PDF file");b(!0);let r=async t=>{try{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e);let l=URL.createObjectURL(t);a(l),g(t),w(!0);let s=new FileReader;s.onload=e=>{var a;let l=(null==(a=e.target)?void 0:a.result).split(",")[1];try{localStorage.setItem("local-resume-data",l),localStorage.setItem("local-resume-name",t.name),localStorage.setItem("local-resume-date",new Date().toISOString()),w(!0),f.Ay.success("Resume saved locally!")}catch(e){console.error("LocalStorage error:",e),f.Ay.success("Resume loaded (temporary - will be lost on refresh)")}},s.readAsDataURL(t)}catch(e){throw console.error("Error saving resume locally:",e),e}};try{if(k){let e=(0,p.U)(),{data:{user:t}}=await e.auth.getUser();console.log("Current authenticated user:",t);try{let t="resume-".concat(Date.now(),".pdf");console.log("Attempting to upload file to Supabase:",t);let{data:l,error:r}=await e.storage.from("resumes").upload(t,s,{cacheControl:"3600",upsert:!1});if(r)throw r;console.log("File uploaded successfully:",l);let{data:{publicUrl:i}}=e.storage.from("resumes").getPublicUrl(t);console.log("Public URL:",i);try{await e.from("resumes").update({is_active:!1}).eq("is_active",!0);let{error:t}=await e.from("resumes").insert({file_url:i,file_name:s.name,is_active:!0});if(t)throw t;a(i),w(!1),f.Ay.success("Resume uploaded to cloud successfully!")}catch(e){console.error("Database error, but file is uploaded:",e),a(i),w(!1),f.Ay.success("Resume uploaded (without database record)")}}catch(e){console.log("Supabase upload failed, saving locally:",e),(0,f.Ay)("⚠️ Cloud upload failed - saving locally instead"),await r(s)}}else await r(s)}catch(a){let e="Failed to upload resume";a instanceof Error||"object"==typeof a&&null!==a&&"message"in a?e=a.message:"string"==typeof a&&(e=a),f.Ay.error(e),console.error("Upload error:",a)}finally{b(!1),t.target.value=""}};return(0,s.useEffect)(()=>()=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)},[e]),(0,l.jsx)("section",{className:"py-20",children:(0,l.jsxs)("div",{className:"container mx-auto px-4",children:[(0,l.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-5xl font-bold mb-4",children:(0,l.jsx)(u.A,{children:"My Resume"})}),(0,l.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Download my latest CV or view it online"}),!k&&(0,l.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-2",children:"(Local storage mode - Resume saved in browser)"})]}),(0,l.jsx)("div",{className:"max-w-4xl mx-auto",children:t?(0,l.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,l.jsx)(o,{className:"w-8 h-8 animate-spin"})}):(0,l.jsx)(l.Fragment,{children:e?(0,l.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,l.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,l.jsxs)("a",{href:e,download:(null==h?void 0:h.name)||"resume.pdf",className:"bg-primary-500 text-white px-8 py-3 rounded-lg inline-flex items-center gap-3 hover:bg-primary-600 transition-colors text-lg font-medium",children:[(0,l.jsx)(n.A,{className:"w-6 h-6"}),"Download Resume"]})}),(0,l.jsx)("div",{className:"bg-white dark:bg-dark-surface rounded-lg shadow-lg overflow-hidden",children:(0,l.jsx)("div",{className:"relative w-full",style:{paddingBottom:"141.42%"},children:(0,l.jsx)("iframe",{src:e,className:"absolute top-0 left-0 w-full h-full",title:"Resume",allowFullScreen:!0})})}),(null==N?void 0:N.isAdmin)&&(0,l.jsxs)("div",{className:"mt-12 p-6 bg-gray-100 dark:bg-dark-surface rounded-lg",children:[(0,l.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(c,{className:"w-5 h-5"}),"Update Resume (Admin)"]}),(0,l.jsx)("input",{type:"file",accept:".pdf",onChange:A,disabled:x,className:"block w-full text-sm text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-100 file:text-primary-700 hover:file:bg-primary-200 dark:file:bg-primary-900 dark:file:text-primary-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),x&&(0,l.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,l.jsx)(o,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]})]}):(0,l.jsxs)("div",{className:"text-center py-20",children:[(0,l.jsx)(d,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"No resume available yet."}),(null==N?void 0:N.isAdmin)&&(0,l.jsxs)("div",{className:"mt-8 p-6 bg-gray-100 dark:bg-dark-surface rounded-lg max-w-md mx-auto",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Upload Resume"}),(0,l.jsx)("input",{type:"file",accept:".pdf",onChange:A,disabled:x,className:"block w-full text-sm text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-100 file:text-primary-700 hover:file:bg-primary-200 dark:file:bg-primary-900 dark:file:text-primary-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),x&&(0,l.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,l.jsx)(o,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]})]})})})]})})}},6681:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var l=t(2115),s=t(2643),r=t(5695),i=t(3568);function o(){let[e,a]=(0,l.useState)(null),[t,o]=(0,l.useState)(!0),n=(0,r.useRouter)();return(0,l.useEffect)(()=>{let e=(0,s.U)();(async()=>{try{let{data:{user:t}}=await e.auth.getUser();t&&a({id:t.id,email:t.email,isAdmin:"michelebellitti78@gmail.com"===t.email})}catch(e){console.log("Auth check error (this is normal if Supabase is not set up):",e)}finally{o(!1)}})();let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{(null==t?void 0:t.user)?a({id:t.user.id,email:t.user.email,isAdmin:"michelebellitti78@gmail.com"===t.user.email}):a(null)});return()=>t.unsubscribe()},[!0,n]),{user:e,loading:t,signIn:async(e,a)=>{try{let t=(0,s.U)(),{error:l}=await t.auth.signInWithPassword({email:e,password:a});if(l)throw l;i.Ay.success("Successfully logged in!"),n.push("/"),n.refresh()}catch(e){throw i.Ay.error(e.message||"Failed to sign in"),e}},signOut:async()=>{try{let e=(0,s.U)();await e.auth.signOut(),i.Ay.success("Successfully logged out!"),n.push("/"),n.refresh()}catch(e){i.Ay.error("Failed to sign out")}}}}},7051:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var l=t(5155),s=t(6408);function r(e){let{children:a,className:t="",delay:r=0,duration:i=.5}=e,o=String(a).split(" "),n={visible:{opacity:1,y:0,transition:{type:"spring",damping:12,stiffness:100,duration:i}},hidden:{opacity:0,y:20,transition:{type:"spring",damping:12,stiffness:100,duration:i}}};return(0,l.jsx)(s.P.div,{className:t,variants:{hidden:{opacity:0},visible:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],{opacity:1,transition:{staggerChildren:.12,delayChildren:r}}}},initial:"hidden",animate:"visible",children:o.map((e,a)=>(0,l.jsx)(s.P.span,{variants:n,className:"inline-block mr-1",children:e},a))})}}},e=>{var a=a=>e(e.s=a);e.O(0,[165,568,877,441,684,358],()=>a(1098)),_N_E=e.O()}]);