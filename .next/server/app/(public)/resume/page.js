(()=>{var e={};e.id=147,e.ids=[147],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4713:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(60687),a=r(26001);function i({children:e,className:t="",delay:r=0,duration:i=.5}){let l=String(e).split(" "),o={visible:{opacity:1,y:0,transition:{type:"spring",damping:12,stiffness:100,duration:i}},hidden:{opacity:0,y:20,transition:{type:"spring",damping:12,stiffness:100,duration:i}}};return(0,s.jsx)(a.P.div,{className:t,variants:{hidden:{opacity:0},visible:(e=1)=>({opacity:1,transition:{staggerChildren:.12,delayChildren:r}})},initial:"hidden",animate:"visible",children:l.map((e,t)=>(0,s.jsx)(a.P.span,{variants:o,className:"inline-block mr-1",children:e},t))})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},17741:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(37413),a=r(33483);let i={title:"Resume - Michele Bellitti",description:"View and download my professional resume"};function l(){return(0,s.jsx)("div",{className:"min-h-screen pt-20",children:(0,s.jsx)(a.default,{})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26297:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),l=r.n(i),o=r(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let d={children:["",{children:["(public)",{children:["resume",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,17741)),"/Users/michb/dev/portfolio/src/app/(public)/resume/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/michb/dev/portfolio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/michb/dev/portfolio/src/app/(public)/resume/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(public)/resume/page",pathname:"/resume",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},33483:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/michb/dev/portfolio/src/components/sections/ResumePage.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/michb/dev/portfolio/src/components/sections/ResumePage.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43414:(e,t,r)=>{Promise.resolve().then(r.bind(r,33483))},43526:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var s=r(60687),a=r(43210),i=r(26001),l=r(62688);let o=(0,l.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var n=r(31158);let d=(0,l.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),c=(0,l.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var u=r(4713),p=r(87979),m=r(79481);let x={supabase:{url:"https://yyuyikhmqzlzchndamiw.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5dXlpa2htcXpsemNobmRhbWl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MDU0NjIsImV4cCI6MjA2NTM4MTQ2Mn0.zNEzk_r7LegdNzb1zUV0h696Q1BWrHWC9vuC_H9ZuU4"}},h=()=>!!(x.supabase.url&&x.supabase.anonKey&&"https://placeholder.supabase.co"!==x.supabase.url);var f=r(37590);function y(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0),[x,y]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),{user:j}=(0,p.A)(),k=h(),N=async r=>{let s=r.target.files?.[0];if(!s)return;if(!s.type.includes("pdf"))return void f.Ay.error("Please upload a PDF file");g(!0);let a=async r=>{try{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e);let s=URL.createObjectURL(r);t(s),y(r),w(!0);let a=new FileReader;a.onload=e=>{let t=(e.target?.result).split(",")[1];try{localStorage.setItem("local-resume-data",t),localStorage.setItem("local-resume-name",r.name),localStorage.setItem("local-resume-date",new Date().toISOString()),w(!0),f.Ay.success("Resume saved locally!")}catch(e){console.error("LocalStorage error:",e),f.Ay.success("Resume loaded (temporary - will be lost on refresh)")}},a.readAsDataURL(r)}catch(e){throw console.error("Error saving resume locally:",e),e}};try{if(k){let e=(0,m.U)(),{data:{user:r}}=await e.auth.getUser();console.log("Current authenticated user:",r);try{let r=`resume-${Date.now()}.pdf`;console.log("Attempting to upload file to Supabase:",r);let{data:a,error:i}=await e.storage.from("resumes").upload(r,s,{cacheControl:"3600",upsert:!1});if(i)throw i;console.log("File uploaded successfully:",a);let{data:{publicUrl:l}}=e.storage.from("resumes").getPublicUrl(r);console.log("Public URL:",l);try{await e.from("resumes").update({is_active:!1}).eq("is_active",!0);let{error:r}=await e.from("resumes").insert({file_url:l,file_name:s.name,is_active:!0});if(r)throw r;t(l),w(!1),f.Ay.success("Resume uploaded to cloud successfully!")}catch(e){console.error("Database error, but file is uploaded:",e),t(l),w(!1),f.Ay.success("Resume uploaded (without database record)")}}catch(e){console.log("Supabase upload failed, saving locally:",e),(0,f.Ay)("⚠️ Cloud upload failed - saving locally instead"),await a(s)}}else await a(s)}catch(t){let e="Failed to upload resume";t instanceof Error||"object"==typeof t&&null!==t&&"message"in t?e=t.message:"string"==typeof t&&(e=t),f.Ay.error(e),console.error("Upload error:",t)}finally{g(!1),r.target.value=""}};return(0,s.jsx)("section",{className:"py-20",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"text-center mb-12",children:[(0,s.jsx)("h1",{className:"text-5xl font-bold mb-4",children:(0,s.jsx)(u.A,{children:"My Resume"})}),(0,s.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Download my latest CV or view it online"}),!k&&(0,s.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-2",children:"(Local storage mode - Resume saved in browser)"})]}),(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:r?(0,s.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,s.jsx)(o,{className:"w-8 h-8 animate-spin"})}):(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,s.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,s.jsxs)("a",{href:e,download:x?.name||"resume.pdf",className:"bg-primary-500 text-white px-8 py-3 rounded-lg inline-flex items-center gap-3 hover:bg-primary-600 transition-colors text-lg font-medium",children:[(0,s.jsx)(n.A,{className:"w-6 h-6"}),"Download Resume"]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-surface rounded-lg shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"relative w-full",style:{paddingBottom:"141.42%"},children:(0,s.jsx)("iframe",{src:e,className:"absolute top-0 left-0 w-full h-full",title:"Resume",allowFullScreen:!0})})}),j?.isAdmin&&(0,s.jsxs)("div",{className:"mt-12 p-6 bg-gray-100 dark:bg-dark-surface rounded-lg",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(d,{className:"w-5 h-5"}),"Update Resume (Admin)"]}),(0,s.jsx)("input",{type:"file",accept:".pdf",onChange:N,disabled:b,className:"block w-full text-sm text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-100 file:text-primary-700 hover:file:bg-primary-200 dark:file:bg-primary-900 dark:file:text-primary-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),b&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(o,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]})]}):(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)(c,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"No resume available yet."}),j?.isAdmin&&(0,s.jsxs)("div",{className:"mt-8 p-6 bg-gray-100 dark:bg-dark-surface rounded-lg max-w-md mx-auto",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Upload Resume"}),(0,s.jsx)("input",{type:"file",accept:".pdf",onChange:N,disabled:b,className:"block w-full text-sm text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary-100 file:text-primary-700 hover:file:bg-primary-200 dark:file:bg-primary-900 dark:file:text-primary-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),b&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(o,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]})]})})})]})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66974:(e,t,r)=>{Promise.resolve().then(r.bind(r,43526))},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,388,658,841],()=>r(26297));module.exports=s})();